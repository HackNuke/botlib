#!/usr/bin/env python3

""" run tests. """

import os; import sys; sys.path.insert(0, os.getcwd())

from botlib.utils import parse_cli
from botlib.space import exceptions, kernel

import unittest

test_path = os.getcwd() + os.sep + "tests"
suite = unittest.loader.TestLoader().discover(test_path, pattern="test*.py")

def main():
    """ run unittests. """
    cfg = parse_cli()
    cfg.workdir = os.path.join(os.getcwd(), ".bot")
    kernel.boot(cfg)
    unittest.TextTestRunner(verbosity=3).run(suite)

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        pass
    if exceptions:
        for ex in exceptions:
            print(ex)
    else:
        print("no exceptions.")