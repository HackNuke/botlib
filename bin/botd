#!/usr/bin/env python3 
# This file is placed in the Public Domain.

from ob.krn import Shell, cfg, exec, format, j, last, sys, time

def cprint(txt):
    sys.stdout.write(txt + "\n")
    sys.stdout.flush()

def main():
    last(cfg)
    cprint("OB started at %s" % time.ctime(time.time()))
    cprint(format(cfg))
    s = Shell()
    s.scandir(j(cfg.wd, "mod"))
    s.start()
    s.init("irc")
    s.init(cfg.mods)
    cprint("loaded %s" % ",".join(s.modnames))
    s.wait()

exec(main)
