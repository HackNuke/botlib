#!/usr/bin/python3 -u
# OKBOT - the ok bot !
#
# main program.

from ok.csl import Console
from ok.krn import cmd
from ok.shl import execute, checkroot
from bot.irc import IRC

import sys

def main():
    checkroot()
    if len(sys.argv) > 1:
        return cmd(" ".join(sys.argv[1:]), "ok,bot")
    c = Console()
    c.load_mod("ok.shw")
    c.walk("bot")
    i = IRC()
    i.cmds.update(c.cmds)
    i.cfg.last()
    i.start()
    c.start()
    c.wait()
    
execute(main)
