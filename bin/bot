#!/usr/bin/python3 -u
# BOTLIB - the bot library !
#
#

__version__ = 86

import os, sys ; sys.path.insert(0, os.getcwd())

from bot.csl import Console
from bot.irc import IRC
from bot.krn import k
from bot.shl import daemon, execute, parse_cli

import sys

def main():
    cfg = parse_cli()
    k.walk("botd")
    if cfg.txt:
        return k.cmd(cfg.txt)
    k.start()
    wait = False
    if "d" in cfg.opts:
        daemon()
        wait = True
    if "s" in cfg.opts:
        c = Console()
        c.start()
        wait = True
    if wait:
        k.wait()

execute(main)
