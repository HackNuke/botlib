#!/usr/bin/python3 -u
# BOTLIB - the bot library !
#
# main program.

from bot.spc import check, execute, get_kernel, os, parse_cli

opts = [
    ('-l', '--loglevel', 'store', str, "error", 'set loglevel.', 'level'),
    ('-m', '--modules', 'store', str, "", 'modules to load.', 'modules'),
    ('-o', '--options', 'store', str, "", "options to use", 'options'),
    ('-w', '--workdir', 'store', str, os.path.expanduser("~/.bot"), "directory to work on", 'workdir'),
]


def main():
    parse_cli("bot", opts)
    k = get_kernel()
    k.scan("bot")
    k.start()
    k.init("irc,csl")
    k.wait()
       
execute(main)
